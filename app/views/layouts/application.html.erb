<!DOCTYPE html>
<html>
<head>
     <title>Ever</title>
     <%= stylesheet_link_tag    "application", media: "all", "data-turbolinks-track" => true %>
     <%= javascript_include_tag "application", "data-turbolinks-track" => true %>
     <%= csrf_meta_tags %>
     <meta name="mobile-web-app-capable" content="yes">
     <meta name="apple-mobile-web-app-capable" content="yes" />
     <meta name="apple-mobile-web-app-status-bar-style" content="black">
     <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
     <link rel="apple-touch-icon" href="https://catchframedev.s3.amazonaws.com/uploads/7a2aaee6-fa48-42a0-9244-c24d99dd3f2b/icon.png"/>
</head>
<body>
     <navbar id="scroll-home">
          <a href="/"><img src="https://catchframedev.s3.amazonaws.com/uploads/7a2aaee6-fa48-42a0-9244-c24d99dd3f2b/icon.png" id="home"/></a>
          <a href="/days/new" class="new-day">+</a>
     </navbar>
<div id="container">
     <%= yield %>
     <br>
     <%= link_to "sign out ", destroy_user_session_path, method: :delete, :class => 'navbar-link'  %>
</div>
<br>
<div class="main">
  <h2>Device Orientation</h2>
  <table>
    <tr>
      <td>Event Supported</td>
      <td id="doEvent"></td>
    </tr>
    <tr>
      <td>Tilt Left/Right [gamma]</td>
      <td id="doTiltLR"></td>
    </tr>
    <tr>
      <td>Tilt Front/Back [beta]</td>
      <td id="doTiltFB"></td>
    </tr>
    <tr>
      <td>Direction [alpha]</td>
      <td id="doDirection"></td>
    </tr>
   </table>
</div>

<div class="container" style="perspective: 300;">
  <img src="https://catchframedev.s3.amazonaws.com/uploads/7a2aaee6-fa48-42a0-9244-c24d99dd3f2b/icon.png" id="imgLogo" class="logo">
</div>

<script type="text/javascript">
     
$(function(){
          
          // PAGINATION
          if ($('.pagination').length) {
               $(window).scroll(function() {
                    var url;
                    url = $('.pagination .next_page').attr('href');
                    if (url && $(window).scrollTop() > $(document).height() - $(window).height() - 750) {
                         $('.pagination').text("Getting more...");
                         return $.getScript(url);
                    }
               });
               return $(window).scroll();
          }
          // PAGINATION end

          

});
          $('body').on("click", '#scroll-home', function() {
               $('body').animate({scrollTop:0}, '500', 'swing', function() { 

               });  
          });



          if (window.DeviceOrientationEvent) {
  document.getElementById("doEvent").innerHTML = "DeviceOrientation";
  // Listen for the deviceorientation event and handle the raw data
  window.addEventListener('deviceorientation', function(eventData) {
    // gamma is the left-to-right tilt in degrees, where right is positive
    var tiltLR = eventData.gamma;

    // beta is the front-to-back tilt in degrees, where front is positive
    var tiltFB = eventData.beta;

    // alpha is the compass direction the device is facing in degrees
    var dir = eventData.alpha

    // call our orientation event handler
    deviceOrientationHandler(tiltLR, tiltFB, dir);
  }, false);
} else {
  document.getElementById("doEvent").innerHTML = "Not supported."
}

document.getElementById("doTiltLR").innerHTML = Math.round(tiltLR);
document.getElementById("doTiltFB").innerHTML = Math.round(tiltFB);
document.getElementById("doDirection").innerHTML = Math.round(dir);

// Apply the transform to the image
var logo = document.getElementById("imgLogo");
logo.style.webkitTransform =
  "rotate("+ tiltLR +"deg) rotate3d(1,0,0, "+ (tiltFB*-1)+"deg)";
logo.style.MozTransform = "rotate("+ tiltLR +"deg)";
logo.style.transform =
  "rotate("+ tiltLR +"deg) rotate3d(1,0,0, "+ (tiltFB*-1)+"deg)";

</script>

</body>
</html>
